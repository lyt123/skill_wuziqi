<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>技能五子棋 | 在线对战</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/board.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <div class="game-container">
        <!-- 音频和视频元素 -->
        <audio id="bgmAudio" loop preload="auto">
            <source src="res/BGM.flac" type="audio/flac">
        </audio>
        <video id="skillVideo" style="display: none;" preload="auto">
            <source src="" type="video/mp4">
        </video>
        
        <!-- 关于弹窗 -->
        <div id="aboutModal" class="modal" style="display: none;">
            <div class="modal-content about-modal">
                <span class="modal-close" onclick="closeAbout()">&times;</span>
                <h2>💡 关于技能五子棋</h2>
                <div class="about-content">
                    <p class="about-intro">欢迎来到技能五子棋大乱斗！这是一款融合传统五子棋与趣味技能的创新游戏。</p>
                    
                    <h3>📱 加入我们的社区</h3>
                    <div class="qr-codes-container">
                        <div class="qr-code-item">
                            <img src="contact/wechat_group.jpg" alt="微信用户群" class="qr-code-img">
                            <p class="qr-code-label">🔥 微信用户群</p>
                            <p class="qr-code-desc">扫码加入，与玩家交流</p>
                        </div>
                        <div class="qr-code-item">
                            <img src="contact/xiaohongshu.jpg" alt="小红书账号" class="qr-code-img">
                            <p class="qr-code-label">📖 小红书官方账号</p>
                            <p class="qr-code-desc">关注获取最新动态</p>
                        </div>
                    </div>
                    
                    <div class="about-footer">
                        <p>🎯 感谢你的支持！祝游戏愉快~</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 技能说明弹窗 -->
        <div id="skillHelpModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="modal-close" onclick="closeSkillHelp()">&times;</span>
                <h2>🎮 技能五子棋玩法说明</h2>
                <div class="help-content">
                    <h3>📜 游戏规则</h3>
                    <p>这是一个结合了传统五子棋和技能系统的对战游戏。双方轮流下棋，先连成五子者获胜！</p>
                    
                    <h3>⚡ 技能系统</h3>
                    <div class="skill-help-item">
                        <div class="skill-help-header">
                            <span class="skill-help-icon">🌪️</span>
                            <strong>飞沙走石</strong>
                            <span class="skill-help-cd">冷却: 3回合</span>
                        </div>
                        <p>选择对手的一个棋子，将其扔出棋盘。适合破坏对手的连线布局。</p>
                    </div>
                    
                    <div class="skill-help-item">
                        <div class="skill-help-header">
                            <span class="skill-help-icon">♻️</span>
                            <strong>拾金不昧</strong>
                            <span class="skill-help-cd">冷却: 5回合</span>
                        </div>
                        <p>在棋盘空位随机生成一颗自己的棋子。可以快速增加棋子数量。</p>
                    </div>
                    
                    <div class="skill-help-item">
                        <div class="skill-help-header">
                            <span class="skill-help-icon">🧹</span>
                            <strong>保洁上门</strong>
                            <span class="skill-help-cd">冷却: 7回合</span>
                        </div>
                        <p>随机清理对手1-3个棋子。强力的破坏技能，可以瞬间改变局势。</p>
                    </div>
                    
                    <div class="skill-help-item">
                        <div class="skill-help-header">
                            <span class="skill-help-icon">⏸️</span>
                            <strong>静如止水</strong>
                            <span class="skill-help-cd">冷却: 10回合</span>
                        </div>
                        <p>禁用对手下一回合的所有技能。用于关键时刻阻止对手使用技能。</p>
                    </div>
                    
                    <div class="skill-help-item">
                        <div class="skill-help-header">
                            <span class="skill-help-icon">🔄</span>
                            <strong>两级反转</strong>
                            <span class="skill-help-cd">冷却: 999回合</span>
                        </div>
                        <p>交换棋盘上双方的所有棋子。超强大招，只能使用一次，慎用！</p>
                    </div>
                    
                    <div class="skill-help-item">
                        <div class="skill-help-header">
                            <span class="skill-help-icon">💥</span>
                            <strong>力拔山兮</strong>
                            <span class="skill-help-cd">冷却: 999回合</span>
                        </div>
                        <p>清空棋盘上的所有棋子，重新开始。终极大招，同归于尽！</p>
                    </div>
                    
                    <h3>🎯 操作指南</h3>
                    <ol>
                        <li>点击技能卡片选择要使用的技能</li>
                        <li>点击"使用技能"按钮确认</li>
                        <li>如需选择目标（如飞沙走石），点击棋盘上的目标棋子</li>
                        <li>观看技能特效视频，点击任意位置关闭</li>
                        <li>技能生效后可以继续下棋</li>
                    </ol>
                    
                    <p class="help-footer">💡 提示：合理使用技能组合可以创造出意想不到的战术效果！</p>
                </div>
            </div>
        </div>
        
        <!-- 游戏头部 -->
        <header class="game-header">
            <h1>🎯 技能五子棋大乱斗 🎊</h1>
        </header>

        <!-- 游戏主体 -->
        <main class="game-main">
            <!-- 游戏棋盘 -->
            <div class="game-board-container">
                <!-- 技能面板和状态控制区域 -->
                <div class="skills-status-row">
                    <!-- 紧凑技能面板 -->
                    <div class="compact-skills-panel">
                        <div class="compact-skills-grid">
                            <div class="compact-skill-item" data-skill="flyStone" onclick="selectSkill(this)" title="飞沙走石 - 选择对手棋子扔出棋盘">
                                <div class="compact-skill-icon">🌪️</div>
                                <div class="compact-skill-name">飞沙走石</div>
                                <div class="compact-skill-cd"><span class="cd-text">3回合</span></div>
                            </div>
                            <div class="compact-skill-item" data-skill="pickGold" onclick="selectSkill(this)" title="拾金不昧 - 随机生成一颗棋子">
                                <div class="compact-skill-icon">♻️</div>
                                <div class="compact-skill-name">拾金不昧</div>
                                <div class="compact-skill-cd"><span class="cd-text">5回合</span></div>
                            </div>
                            <div class="compact-skill-item" data-skill="cleanHouse" onclick="selectSkill(this)" title="保洁上门 - 随机清理对手1-3个棋子">
                                <div class="compact-skill-icon">🧹</div>
                                <div class="compact-skill-name">保洁上门</div>
                                <div class="compact-skill-cd"><span class="cd-text">7回合</span></div>
                            </div>
                            <div class="compact-skill-item" data-skill="silence" onclick="selectSkill(this)" title="静如止水 - 禁用对手下回合技能">
                                <div class="compact-skill-icon">⏸️</div>
                                <div class="compact-skill-name">静如止水</div>
                                <div class="compact-skill-cd"><span class="cd-text">10回合</span></div>
                            </div>
                            <div class="compact-skill-item" data-skill="reverseBoard" onclick="selectSkill(this)" title="两级反转 - 交换棋盘中双方棋子">
                                <div class="compact-skill-icon">🔄</div>
                                <div class="compact-skill-name">两级反转</div>
                                <div class="compact-skill-cd"><span class="cd-text">999回合</span></div>
                            </div>
                            <div class="compact-skill-item" data-skill="clearAll" onclick="selectSkill(this)" title="力拔山兮 - 清空棋盘所有棋子">
                                <div class="compact-skill-icon">💥</div>
                                <div class="compact-skill-name">力拔山兮</div>
                                <div class="compact-skill-cd"><span class="cd-text">999回合</span></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 右侧状态和控制区域 -->
                    <div class="right-control-panel">
                        <div class="game-status-compact">
                            <div class="status-item">
                                <span class="status-label">🎭</span>
                                <span class="status-value" id="currentPlayer">黑棋</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">⏰</span>
                                <span class="status-value" id="turnCount">1</span>
                            </div>
                        </div>
                        <button class="inline-use-skill-btn" id="useSkillBtn" onclick="confirmUseSkill()" disabled>
                            🚀 使用技能
                        </button>
                        <button class="inline-help-btn" onclick="showSkillHelp()" title="查看技能说明">
                            ❓
                        </button>
                    </div>
                </div>
                
                <div class="board" id="gameBoard"></div>
                
                <!-- 游戏控制按钮 -->
                <div class="game-controls-row">
                    <button class="btn btn-success" onclick="startNewGame()">🎮 重新开始</button>
                    <button class="btn btn-warning" onclick="undoMove()">⏪ 悔棋</button>
                    <button class="btn btn-music" id="musicToggleBtn" onclick="toggleMusic()" title="音乐开关">🎵</button>
                    <button class="btn btn-info" onclick="showAbout()" title="关于我们">ℹ️ 关于</button>
                </div>
            </div>

            <!-- 信息面板 -->
            <div class="info-panel">
                <h3>📜 战斗日志</h3>
                <div class="game-log" id="gameLog">
                    <div class="log-item">🎯 游戏开始！让我们愉快地厮杀吧~ </div>
                </div>
            </div>
        </main>
    </div>

    <!-- JavaScript文件 -->
    <script src="SkillConfig.js"></script>
    <script src="SkillExecutor.js"></script>
    <script src="GameCore.js"></script>
    <script src="SkillSystem.js"></script>
    <script src="MediaManager.js"></script>
    <script src="UIManager.js"></script>
    <script src="main.js"></script>
</body>
</html>
